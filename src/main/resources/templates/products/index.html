<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Products - Danial Store</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
      :root {
        --primary-color: #6366f1;
        --primary-dark: #4f46e5;
        --secondary-color: #f59e0b;
        --success-color: #10b981;
        --danger-color: #ef4444;
        --warning-color: #f59e0b;
        --dark-color: #1f2937;
        --light-color: #f8fafc;
        --border-color: #e2e8f0;
        --text-primary: #1e293b;
        --text-secondary: #64748b;
        --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        color: var(--text-primary);
        line-height: 1.6;
        min-height: 100vh;
      }

      /* Header Section */
      .header-section {
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
        padding: 3rem 0;
        margin-bottom: 2rem;
        position: relative;
        overflow: hidden;
      }

      .header-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><defs><radialGradient id="a" cx="50%" cy="40%"><stop offset="0%" stop-color="white" stop-opacity=".1"/><stop offset="100%" stop-color="white" stop-opacity="0"/></radialGradient></defs><rect width="100" height="20" fill="url(%23a)"/></svg>');
        opacity: 0.5;
      }

      .header-content {
        position: relative;
        z-index: 2;
      }

      .page-title {
        color: white;
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }

      .page-subtitle {
        color: rgba(255,255,255,0.9);
        font-size: 1.1rem;
        margin-bottom: 2rem;
      }

      /* Action Bar */
      .action-bar {
        background: white;
        border-radius: 16px;
        padding: 1.5rem;
        margin-bottom: 2rem;
        box-shadow: var(--shadow-md);
        border: 1px solid var(--border-color);
      }

      .btn-create {
        background: linear-gradient(135deg, var(--success-color) 0%, #059669 100%);
        border: none;
        padding: 12px 24px;
        border-radius: 10px;
        font-weight: 600;
        color: white;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-sm);
      }

      .btn-create:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
        color: white;
        filter: brightness(1.1);
      }

      .search-container {
        position: relative;
        max-width: 300px;
      }

      .search-input {
        border: 2px solid var(--border-color);
        border-radius: 10px;
        padding: 10px 40px 10px 16px;
        width: 100%;
        transition: all 0.3s ease;
        background: var(--light-color);
      }

      .search-input:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        background: white;
      }

      .search-icon {
        position: absolute;
        right: 12px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--text-secondary);
      }

      /* Products Container */
      .products-container {
        background: white;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: var(--shadow-lg);
        border: 1px solid var(--border-color);
      }

      .table-header {
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
        padding: 1.5rem 2rem;
        border-bottom: 1px solid var(--border-color);
      }

      .table-title {
        color: white;
        font-size: 1.5rem;
        font-weight: 600;
        margin: 0;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .products-count {
        background: rgba(255,255,255,0.2);
        color: white;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.875rem;
        font-weight: 500;
      }

      /* Table Styles */
      .modern-table {
        margin: 0;
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
      }

      .modern-table thead {
        background: var(--light-color);
      }

      .modern-table thead th {
        background: var(--light-color);
        color: var(--text-primary);
        font-weight: 600;
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        padding: 1rem 1.5rem;
        border-bottom: 2px solid var(--border-color);
        border: none;
        position: sticky;
        top: 0;
        z-index: 10;
      }

      .modern-table tbody tr {
        transition: all 0.2s ease;
        border-bottom: 1px solid var(--border-color);
      }

      .modern-table tbody tr:hover {
        background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        transform: translateX(4px);
        box-shadow: 4px 0 12px rgba(99, 102, 241, 0.1);
      }

      .modern-table tbody tr:last-child {
        border-bottom: none;
      }

      .modern-table tbody td {
        padding: 1.25rem 1.5rem;
        vertical-align: middle;
        border: none;
      }

      /* Product Elements */
      .product-id {
        font-weight: 600;
        color: var(--primary-color);
        background: rgba(99, 102, 241, 0.1);
        padding: 4px 8px;
        border-radius: 6px;
        font-size: 0.875rem;
        display: inline-block;
        min-width: 40px;
        text-align: center;
      }

      .product-name {
        font-weight: 600;
        color: var(--text-primary);
        font-size: 0.95rem;
      }

      .product-brand {
        color: var(--primary-color);
        font-weight: 500;
        font-size: 0.9rem;
      }

      .product-category {
        background: linear-gradient(135deg, var(--secondary-color) 0%, #d97706 100%);
        color: white;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 500;
        display: inline-block;
        text-transform: capitalize;
      }

      .product-price {
        font-size: 1.1rem;
        font-weight: 700;
        color: var(--success-color);
      }

      .product-image {
        border-radius: 12px;
        box-shadow: var(--shadow-sm);
        transition: transform 0.3s ease;
        object-fit: cover;
        border: 2px solid var(--border-color);
      }

      .product-image:hover {
        transform: scale(1.1);
        box-shadow: var(--shadow-md);
      }

      .product-date {
        color: var(--text-secondary);
        font-size: 0.875rem;
      }

      /* Action Buttons */
      .action-buttons {
        display: flex;
        gap: 8px;
        flex-wrap: nowrap;
      }

      .btn-edit {
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
        border: none;
        color: white;
        padding: 8px 16px;
        border-radius: 8px;
        font-size: 0.875rem;
        font-weight: 500;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-sm);
      }

      .btn-edit:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
        color: white;
        filter: brightness(1.1);
      }

      .btn-delete {
        background: linear-gradient(135deg, var(--danger-color) 0%, #dc2626 100%);
        border: none;
        color: white;
        padding: 8px 16px;
        border-radius: 8px;
        font-size: 0.875rem;
        font-weight: 500;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-sm);
      }

      .btn-delete:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
        color: white;
        filter: brightness(1.1);
      }

      /* Empty State */
      .empty-state {
        text-align: center;
        padding: 4rem 2rem;
        color: var(--text-secondary);
      }

      .empty-state i {
        font-size: 4rem;
        color: var(--border-color);
        margin-bottom: 1rem;
      }

      .empty-state h3 {
        color: var(--text-primary);
        margin-bottom: 0.5rem;
      }

      .empty-state p {
        margin-bottom: 2rem;
      }

      /* Loading Animation */
      .loading-skeleton {
        animation: pulse 1.5s ease-in-out infinite;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .page-title {
          font-size: 2rem;
        }

        .action-bar {
          padding: 1rem;
        }

        .action-bar .d-flex {
          flex-direction: column;
          gap: 1rem;
        }

        .search-container {
          max-width: 100%;
        }

        .modern-table {
          font-size: 0.875rem;
        }

        .modern-table thead th,
        .modern-table tbody td {
          padding: 0.75rem 0.5rem;
        }

        .action-buttons {
          flex-direction: column;
          gap: 4px;
        }

        .btn-edit,
        .btn-delete {
          font-size: 0.75rem;
          padding: 6px 12px;
        }
      }

      @media (max-width: 576px) {
        .products-container {
          margin: 0 -15px;
          border-radius: 0;
        }

        .table-responsive {
          border-radius: 0;
        }

        .modern-table thead th:not(:first-child):not(:last-child) {
          display: none;
        }

        .modern-table tbody td:not(:first-child):not(:last-child) {
          display: none;
        }
      }

      /* Animations */
      .fade-in {
        animation: fadeIn 0.6s ease-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Scrollbar Styling */
      .table-responsive::-webkit-scrollbar {
        height: 8px;
      }

      .table-responsive::-webkit-scrollbar-track {
        background: var(--light-color);
        border-radius: 4px;
      }

      .table-responsive::-webkit-scrollbar-thumb {
        background: var(--border-color);
        border-radius: 4px;
      }

      .table-responsive::-webkit-scrollbar-thumb:hover {
        background: var(--text-secondary);
      }
    </style>
  </head>
  <body>
    <!-- Header Section -->
    <div class="header-section">
      <div class="container">
        <div class="header-content text-center">
          <h1 class="page-title">
            <i class="fas fa-boxes me-3"></i>
            Product Management
          </h1>
          <p class="page-subtitle">Manage your inventory with ease and efficiency</p>
        </div>
      </div>
    </div>

    <div class="container">
      <!-- Action Bar -->
      <div class="action-bar fade-in">
        <div class="d-flex justify-content-between align-items-center flex-wrap gap-3">
          <div class="d-flex align-items-center gap-3">
            <a href="/products/create" class="btn-create">
              <i class="fas fa-plus"></i>
              Add Product
            </a>
            <div class="products-count">
              <i class="fas fa-cube me-1"></i>
              <span th:text="${#lists.size(products)} + ' Products'">0 Products</span>
            </div>
          </div>
          
          <div class="search-container">
            <input type="text" class="search-input" placeholder="Search products..." id="searchInput">
            <i class="fas fa-search search-icon"></i>
          </div>
        </div>
      </div>

      <!-- Products Container -->
      <div class="products-container fade-in">
        <div class="table-header">
          <h2 class="table-title">
            <i class="fas fa-inventory"></i>
            Product Inventory
          </h2>
        </div>

        <div class="table-responsive">
          <table class="modern-table table">
            <thead>
              <tr>
                <th>
                  <i class="fas fa-hashtag me-2"></i>
                  ID
                </th>
                <th>
                  <i class="fas fa-tag me-2"></i>
                  Product
                </th>
                <th>
                  <i class="fas fa-building me-2"></i>
                  Brand
                </th>
                <th>
                  <i class="fas fa-folder-open me-2"></i>
                  Category
                </th>
                <th>
                  <i class="fas fa-dollar-sign me-2"></i>
                  Price
                </th>
                <th>
                  <i class="fas fa-image me-2"></i>
                  Image
                </th>
                <th>
                  <i class="fas fa-calendar-alt me-2"></i>
                  Created
                </th>
                <th>
                  <i class="fas fa-cogs me-2"></i>
                  Actions
                </th>
              </tr>
            </thead>
            <tbody id="productsTableBody">
              <tr th:each="product : ${products}" class="product-row">
                <td>
                  <span class="product-id" th:text="${product.id}">#001</span>
                </td>
                <td>
                  <div class="product-name" th:text="${product.name}">Sample Product</div>
                </td>
                <td>
                  <div class="product-brand" th:text="${product.brand}">Brand Name</div>
                </td>
                <td>
                  <span class="product-category" th:text="${product.category}">Electronics</span>
                </td>
                <td>
                  <div class="product-price" th:text="'$' + ${product.price}">$99.99</div>
                </td>
                <td>
                  <img th:src="@{'/images/' + ${product.imageFileName}}" 
                       alt="Product Image" 
                       class="product-image"
                       src="https://via.placeholder.com/80x80/6366f1/ffffff?text=IMG"
                       width="100" 
                       height="100">
                </td>
                <td>
                  <div class="product-date" th:text="${#dates.format(product.createdAt, 'MMM dd, yyyy')}">Jan 15, 2024</div>
                </td>
                <td>
                  <div class="action-buttons">
                    <a th:href="@{'/products/edit/' + ${product.id}}" class="btn-edit">
                      <i class="fas fa-edit"></i>
                      Edit
                    </a>
                    <a th:href="@{'/products/delete/' + ${product.id}}" 
                       class="btn-delete"
                       onclick="return confirm('Are you sure you want to delete this product?')">
                      <i class="fas fa-trash"></i>
                      Delete
                    </a>
                  </div>
                </td>
              </tr>
              
              <!-- Empty State -->
              <tr th:if="${#lists.isEmpty(products)}">
                <td colspan="8">
                  <div class="empty-state">
                    <i class="fas fa-box-open"></i>
                    <h3>No Products Found</h3>
                    <p>Your product inventory is empty. Start by adding your first product!</p>
                    <a href="/products/create" class="btn-create">
                      <i class="fas fa-plus me-2"></i>
                      Add Your First Product
                    </a>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Search functionality
        const searchInput = document.getElementById('searchInput');
        const tableBody = document.getElementById('productsTableBody');
        const productRows = tableBody.querySelectorAll('.product-row');

        searchInput.addEventListener('input', function() {
          const searchTerm = this.value.toLowerCase().trim();
          
          productRows.forEach(row => {
            const productName = row.querySelector('.product-name').textContent.toLowerCase();
            const productBrand = row.querySelector('.product-brand').textContent.toLowerCase();
            const productCategory = row.querySelector('.product-category').textContent.toLowerCase();
            
            const isMatch = productName.includes(searchTerm) || 
                          productBrand.includes(searchTerm) || 
                          productCategory.includes(searchTerm);
            
            row.style.display = isMatch ? '' : 'none';
          });
          
          // Show empty state if no matches
          const visibleRows = Array.from(productRows).filter(row => row.style.display !== 'none');
          const emptyState = tableBody.querySelector('.empty-state');
          
          if (visibleRows.length === 0 && searchTerm && !emptyState) {
            const emptyRow = document.createElement('tr');
            emptyRow.classList.add('search-empty');
            emptyRow.innerHTML = `
              <td colspan="8">
                <div class="empty-state">
                  <i class="fas fa-search"></i>
                  <h3>No Results Found</h3>
                  <p>No products match your search term "${searchTerm}"</p>
                </div>
              </td>
            `;
            tableBody.appendChild(emptyRow);
          } else if (visibleRows.length > 0) {
            const searchEmpty = tableBody.querySelector('.search-empty');
            if (searchEmpty) {
              searchEmpty.remove();
            }
          }
        });

        // Add loading states for actions
        document.querySelectorAll('.btn-edit, .btn-delete').forEach(btn => {
          btn.addEventListener('click', function(e) {
            if (this.classList.contains('btn-delete')) {
              // Delete confirmation is already handled by onclick
              return;
            }
            
            // Add loading state for edit buttons
            this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Loading...';
            this.style.pointerEvents = 'none';
          });
        });

        // Initialize tooltips for better UX
        const tooltips = document.querySelectorAll('[data-bs-toggle="tooltip"]');
        tooltips.forEach(tooltip => {
          new bootstrap.Tooltip(tooltip);
        });

        // Add smooth scrolling to top
        let lastScrollTop = 0;
        const header = document.querySelector('.header-section');
        
        window.addEventListener('scroll', function() {
          const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
          
          if (scrollTop > lastScrollTop && scrollTop > 100) {
            // Scrolling down
            header.style.transform = 'translateY(-100%)';
          } else {
            // Scrolling up
            header.style.transform = 'translateY(0)';
          }
          
          lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
        });

        // Add ripple effect to buttons
        document.querySelectorAll('.btn-create, .btn-edit, .btn-delete').forEach(btn => {
          btn.addEventListener('click', function(e) {
            const ripple = document.createElement('span');
            const rect = this.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;
            
            ripple.style.cssText = `
              position: absolute;
              width: ${size}px;
              height: ${size}px;
              left: ${x}px;
              top: ${y}px;
              background: rgba(255,255,255,0.5);
              border-radius: 50%;
              transform: scale(0);
              animation: ripple 0.6s ease-out;
              pointer-events: none;
            `;
            
            this.style.position = 'relative';
            this.style.overflow = 'hidden';
            this.appendChild(ripple);
            
            setTimeout(() => ripple.remove(), 600);
          });
        });
      });

      // Add CSS for ripple animation
      const style = document.createElement('style');
      style.textContent = `
        @keyframes ripple {
          to {
            transform: scale(2);
            opacity: 0;
          }
        }
      `;
      document.head.appendChild(style);
    </script>
  </body>
</html>